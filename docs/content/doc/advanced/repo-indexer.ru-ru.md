---
date: "2019-09-06T01:35:00-03:00"
title: "Индексатор репозитория"
slug: "repo-indexer"
weight: 45
toc: true
draft: false
menu:
  sidebar:
    parent: "advanced"
    name: "Индексатор репозитория"
    weight: 45
    identifier: "repo-indexer"
---

# Индексатор репозитория

## Настройка индексатора репозитория

Gitea может выполнять поиск в файлах репозиториев, включив эту функцию в вашем [`app.ini`](https://docs.gitea.io/ru-ru/config-cheat-sheet/):

```
[indexer]
; ...
REPO_INDEXER_ENABLED = true
REPO_INDEXER_PATH = indexers/repos.bleve
UPDATE_BUFFER_LEN = 20
MAX_FILE_SIZE = 1048576
REPO_INDEXER_INCLUDE =
REPO_INDEXER_EXCLUDE = resources/bin/**
```

Имейте в виду, что индексация содержимого может потреблять много системных ресурсов, особенно когда индекс создаётся впервые или обновляется глобально (например, после обновления Gitea).

### Выбор файлов для индексации по размеру

Параметр `MAX_FILE_SIZE` заставляет индексатор пропускать все файлы, размер которых превышает указанное значение.

### Выбор файлов для индексации по пути

Gitea применяет сопоставление шаблонов glob'а из библиотеки [`gobwas/glob`] (https://github.com/gobwas/glob), чтобы выбрать, какие файлы будут включены в индекс.

Ограничение списка файлов предотвращает загрязнение индексов производными или нерелевантными файлами (например, lss, sym, map и т.д.), Поэтому результаты поиска более релевантны. Это также может помочь уменьшить размер индекса.

`REPO_INDEXER_EXCLUDE_VENDORED` (по умолчанию: true) исключает vendored файлы из индекса.

`REPO_INDEXER_INCLUDE` (по умолчанию: empty) - это список шаблонов glob, разделённых запятыми, для **включения** в индекс. Пустой список означает "_включить все файлы_".
`REPO_INDEXER_EXCLUDE` (по умолчанию: empty) - это список шаблонов glob, разделённых запятыми, для **исключения** из индекса. Файлы, соответствующие этому списку, не будут индексироваться. `REPO_INDEXER_EXCLUDE` имеет приоритет над `REPO_INDEXER_INCLUDE`.

Сопоставление с образцом работает следующим образом:

* Чтобы сопоставить все файлы с расширением `.txt` независимо от того, в каком каталоге, используйте `**.txt`.
* Чтобы сопоставить все файлы с расширением `.txt`  _только на корневом уровне репозитория_, используйте `*.txt`.
* Чтобы сопоставить все файлы внутри `resources/bin` и ниже используйте `resources/bin/**`.
* Чтобы сопоставить все файлы _сразу внутри_ `resources/bin`, используйте `resources/bin/*`.
* Чтобы сопоставить все файлы с именем `Makefile`, используйте `**Makefile`.
* Соответствие директории не имеет никакого эффекта; шаблон `resources/bin` не будет включать/исключать файлы внутри этого каталога; `resources/bin/**` будет.
* Все файлы и шаблоны приведены к нижнему регистру, поэтому `**Makefile`, `**makefile` и `**MAKEFILE` эквивалентны.


